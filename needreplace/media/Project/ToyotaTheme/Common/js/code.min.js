var vehicleGallery=vehicleGallery||{},modelSpot;vehicleGallery.API={gallery:[],GalleryContainerId:"",GalleryTemplateId:"galleryTemplate",getGalleryItems:function(n){$("#galleryContainer-"+n).closest(".tt-gallery-block").addClass("loading");$.ajax({url:"/api/Vehicle/GetAlbum",method:"GET",async:!1,data:{albumId:$("#parentId-"+n).val(),skip:parseInt($("#skipValue-"+n).val()),take:parseInt($("#takeValue-"+n).val())},success:function(t){if(t.AlbumItems.length>0){vehicleGallery.API.gallery=t.AlbumItems;vehicleGallery.API.renderGallery();$("#skipValue-"+n).val(parseInt($("#skipValue-"+n).val())+parseInt($("#takeValue-"+n).val()));var i=$("#galleryContainer-"+n+" > div").length;i>=t.count&&$("#loadmore-"+n).hide();$("#galleryContainer-"+n).find(".vbox-item").attr("data-gall",n);app.venobox()}$("#galleryContainer-"+n).closest(".tt-gallery-block").removeClass("loading")},error:function(){console.log("Json post failed");$("#galleryContainer-"+n).closest(".tt-gallery-block").removeClass("loading")}})},renderGallery:function(){for(var n=0;n<vehicleGallery.API.gallery.length;n++)vehicleGallery.API.renderMarkup(vehicleGallery.API.GalleryTemplateId,vehicleGallery.API.GalleryContainerId,vehicleGallery.API.gallery[n])},renderMarkup:function(n,t,i){var r=document.getElementById(n).innerHTML,u=Mustache.to_html(r,i);$("#"+t).append(u)},init:function(n){this.getGalleryItems(n)}};$(document).ready(function(){$("#galleryTemplate").length>0&&$(".component.gallery.tt-gallery-block").each(function(){var n=$(this).find(".row.main-row.galleryContainer").attr("id").replace("galleryContainer-","");vehicleGallery.API.GalleryContainerId="galleryContainer-"+n;vehicleGallery.API.getGalleryItems(n);$(this).find("#loadmore-"+n).on("click",function(){vehicleGallery.API.GalleryContainerId="galleryContainer-"+n;vehicleGallery.API.init(n)})})});$(document).ajaxComplete(function(){app.venobox()});
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
(function(n,t){if(typeof exports=="object"&&exports)t(exports);else{var i={};t(i);typeof define=="function"&&define.amd?define(i):n.Mustache=i}})(this,function(n){function l(n,t){return b.call(n,t)}function a(n){return!l(k,n)}function u(n){return typeof n=="function"}function e(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function v(n){return String(n).replace(/[&<>"'\/]/g,function(n){return g[n]})}function s(n){if(!o(n)||n.length!==2)throw new Error("Invalid tags: "+n);return[new RegExp(e(n[0])+"\\s*"),new RegExp("\\s*"+e(n[1]))]}function y(t,i){function st(){if(et&&!rt)while(g.length)delete b[g.pop()];else g=[];et=!1;rt=!1}var l,f,o,k,ut,v,d,ot;i=i||n.tags;t=t||"";typeof i=="string"&&(i=i.split(h));for(var y=s(i),u=new r(t),ft=[],b=[],g=[],et=!1,rt=!1;!u.eos();){if(l=u.pos,o=u.scanUntil(y[0]),o)for(d=0,ot=o.length;d<ot;++d)k=o.charAt(d),a(k)?g.push(b.length):rt=!0,b.push(["text",k,l,l+1]),l+=1,k==="\n"&&st();if(!u.scan(y[0]))break;if(et=!0,f=u.scan(it)||"name",u.scan(nt),f==="="?(o=u.scanUntil(c),u.scan(c),u.scanUntil(y[1])):f==="{"?(o=u.scanUntil(new RegExp("\\s*"+e("}"+i[1]))),u.scan(tt),u.scanUntil(y[1]),f="&"):o=u.scanUntil(y[1]),!u.scan(y[1]))throw new Error("Unclosed tag at "+u.pos);if(ut=[f,o,l,u.pos],b.push(ut),f==="#"||f==="^")ft.push(ut);else if(f==="/"){if(v=ft.pop(),!v)throw new Error('Unopened section "'+o+'" at '+l);if(v[1]!==o)throw new Error('Unclosed section "'+v[1]+'" at '+l);}else f==="name"||f==="{"||f==="&"?rt=!0:f==="="&&(y=s(i=o.split(h)))}if(v=ft.pop(),v)throw new Error('Unclosed section "'+v[1]+'" at '+u.pos);return w(p(b))}function p(n){for(var u=[],t,i,r=0,f=n.length;r<f;++r)t=n[r],t&&(t[0]==="text"&&i&&i[0]==="text"?(i[1]+=t[1],i[3]=t[3]):(u.push(t),i=t));return u}function w(n){for(var u=[],r=u,i=[],t,e,f=0,o=n.length;f<o;++f){t=n[f];switch(t[0]){case"#":case"^":r.push(t);i.push(t);r=t[4]=[];break;case"/":e=i.pop();e[5]=t[2];r=i.length>0?i[i.length-1][4]:u;break;default:r.push(t)}}return u}function r(n){this.string=n;this.tail=n;this.pos=0}function t(n,t){this.view=n==null?{}:n;this.cache={".":this.view};this.parent=t}function i(){this.cache={}}var b=RegExp.prototype.test,k=/\S/,d=Object.prototype.toString,o=Array.isArray||function(n){return d.call(n)==="[object Array]"},g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},nt=/\s*/,h=/\s+/,c=/\s*=/,tt=/\s*\}/,it=/#|\^|\/|>|\{|&|=|!/,f;r.prototype.eos=function(){return this.tail===""};r.prototype.scan=function(n){var i=this.tail.match(n),t;return i&&i.index===0?(t=i[0],this.tail=this.tail.substring(t.length),this.pos+=t.length,t):""};r.prototype.scanUntil=function(n){var i=this.tail.search(n),t;switch(i){case-1:t=this.tail;this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i);this.tail=this.tail.substring(i)}return this.pos+=t.length,t};t.prototype.push=function(n){return new t(n,this)};t.prototype.lookup=function(n){var t,i,r,f;if(n in this.cache)t=this.cache[n];else{for(i=this;i;){if(n.indexOf(".")>0)for(t=i.view,r=n.split("."),f=0;t!=null&&f<r.length;)t=t[r[f++]];else t=i.view[n];if(t!=null)break;i=i.parent}this.cache[n]=t}return u(t)&&(t=t.call(this.view)),t};i.prototype.clearCache=function(){this.cache={}};i.prototype.parse=function(n,t){var r=this.cache,i=r[n];return i==null&&(i=r[n]=y(n,t)),i};i.prototype.render=function(n,i,r){var u=this.parse(n),f=i instanceof t?i:new t(i);return this.renderTokens(u,f,r,n)};i.prototype.renderTokens=function(t,i,r,f){function v(n){return y.render(n,i,r)}for(var c,a,h="",y=this,s,e,l=0,p=t.length;l<p;++l){s=t[l];switch(s[0]){case"#":if(e=i.lookup(s[1]),!e)continue;if(o(e))for(c=0,a=e.length;c<a;++c)h+=this.renderTokens(s[4],i.push(e[c]),r,f);else if(typeof e=="object"||typeof e=="string")h+=this.renderTokens(s[4],i.push(e),r,f);else if(u(e)){if(typeof f!="string")throw new Error("Cannot use higher-order sections without the original template");e=e.call(i.view,f.slice(s[3],s[5]),v);e!=null&&(h+=e)}else h+=this.renderTokens(s[4],i,r,f);break;case"^":e=i.lookup(s[1]);(!e||o(e)&&e.length===0)&&(h+=this.renderTokens(s[4],i,r,f));break;case">":if(!r)continue;e=u(r)?r(s[1]):r[s[1]];e!=null&&(h+=this.renderTokens(this.parse(e),i,r,e));break;case"&":e=i.lookup(s[1]);e!=null&&(h+=e);break;case"name":e=i.lookup(s[1]);e!=null&&(h+=n.escape(e));break;case"text":h+=s[1]}}return h};n.name="mustache.js";n.version="0.8.1";n.tags=["{{","}}"];f=new i;n.clearCache=function(){return f.clearCache()};n.parse=function(n,t){return f.parse(n,t)};n.render=function(n,t,i){return f.render(n,t,i)};n.to_html=function(t,i,r,f){var e=n.render(t,i,r);if(u(f))f(e);else return e};n.escape=v;n.Scanner=r;n.Context=t;n.Writer=i});modelSpot=modelSpot||{};modelSpot.API={fullSpecLink:$("#fullSpecLink"),updateQueryString:function(n,t,i){var u,r,f;return i||(i=window.location.href),u=new RegExp("([?&])"+n+"=.*?(&|#|$)(.*)","gi"),u.test(i)?typeof t!="undefined"&&t!==null?i.replace(u,"$1"+n+"="+t+"$2$3"):(r=i.split("#"),i=r[0].replace(u,"$1$3").replace(/(&|\?)$/,""),typeof r[1]!="undefined"&&r[1]!==null&&(i+="#"+r[1]),i):typeof t!="undefined"&&t!==null?(f=i.indexOf("?")!==-1?"&":"?",r=i.split("#"),i=r[0]+f+n+"="+t,typeof r[1]!="undefined"&&r[1]!==null&&(i+="#"+r[1]),i):i},onFullSpecLinkClick:function(){this.fullSpecLink.click(function(){var i=$(".swiper-slide-active").data("id"),n=modelSpot.API.fullSpecLink.attr("href"),t;return n=="javascript:void(0)"||n=="javascript:void(0);"||(t=modelSpot.API.updateQueryString("id",i,n),window.location.href=t),!1})},init:function(){this.onFullSpecLinkClick()}};$(document).ready(function(){modelSpot.API.init()});