/**
 * @license
 *
 * Copyright 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function MapLabel(n){this.set("fontFamily","sans-serif");this.set("fontSize",12);this.set("fontColor","#000000");this.set("strokeWeight",4);this.set("strokeColor","#ffffff");this.set("align","center");this.set("zIndex",1e3);this.setValues(n)}var accordionStatus,accordionNo,savedCheckbox;MapLabel.prototype=new google.maps.OverlayView;window.MapLabel=MapLabel;MapLabel.prototype.changed=function(n){switch(n){case"fontFamily":case"fontSize":case"fontColor":case"strokeWeight":case"strokeColor":case"align":case"text":return this.drawCanvas_();case"maxZoom":case"minZoom":case"position":return this.draw()}};MapLabel.prototype.drawCanvas_=function(){var i=this.canvas_,u,n,t,r,f,e;i&&(u=i.style,u.zIndex=this.get("zIndex"),n=i.getContext("2d"),n.clearRect(0,0,i.width,i.height),n.strokeStyle=this.get("strokeColor"),n.fillStyle=this.get("fontColor"),n.font=this.get("fontSize")+"px "+this.get("fontFamily"),t=Number(this.get("strokeWeight")),r=this.get("text"),r&&(t&&(n.lineWidth=t,n.strokeText(r,t,t)),n.fillText(r,t,t),f=n.measureText(r),e=f.width+t,u.marginLeft=this.getMarginLeft_(e)+"px",u.marginTop="-0.4em"))};MapLabel.prototype.onAdd=function(){var n=this.canvas_=document.createElement("canvas"),r=n.style,t,i;r.position="absolute";t=n.getContext("2d");t.lineJoin="round";t.textBaseline="top";this.drawCanvas_();i=this.getPanes();i&&i.mapPane.appendChild(n)};MapLabel.prototype.onAdd=MapLabel.prototype.onAdd;MapLabel.prototype.getMarginLeft_=function(n){switch(this.get("align")){case"left":return 0;case"right":return-n}return n/-2};MapLabel.prototype.draw=function(){var r=this.getProjection(),t,i,n;r&&this.canvas_&&(t=this.get("position"),t)&&(i=r.fromLatLngToDivPixel(t),n=this.canvas_.style,n.top=i.y+"px",n.left=i.x+"px",n.visibility=this.getVisible_())};MapLabel.prototype.draw=MapLabel.prototype.draw;MapLabel.prototype.getVisible_=function(){var i=this.get("minZoom"),r=this.get("maxZoom"),n,t;return i===undefined&&r===undefined?"":(n=this.getMap(),!n)?"":(t=n.getZoom(),t<i||t>r)?"hidden":""};MapLabel.prototype.onRemove=function(){var n=this.canvas_;n&&n.parentNode&&n.parentNode.removeChild(n)};MapLabel.prototype.onRemove=MapLabel.prototype.onRemove;
/*! jQuery Google Maps Store Locator - v3.0.0 - 2018-03-05
 * http://www.bjornblog.com/web/jquery-store-locator-plugin
 * Copyright (c) 2018 Bjorn Holine; Licensed MIT */
accordionStatus=localStorage.getItem("accordionStatus");accordionStatus===null&&localStorage.setItem("accordionStatus","false");accordionNo=null;savedCheckbox=null;accordionNo===null&&localStorage.setItem("accordionNo","-1"),function(n,t,i,r){"use strict";function ct(t,i){y=n(t);this.element=t;this.settings=n.extend({},vt,i);this._defaults=vt;this._name=o;this.init()}var ut=function(n){var i,u,r;if(t.locSet.length>1){i=new google.maps.LatLngBounds;for(u in t.locSet)r=t.locSet[u],i.extend(new google.maps.LatLng(r.lat,r.lng));n.fitBounds(i)}},nt=function(t){n(".bh-sl-loc-list").show();n("body").addClass("bh-search-done");google.maps.event.trigger(t,"resize")},pt=function(n){var i=3,r=this,t=new google.maps.LatLngBounds(new google.maps.LatLng(23.885942,45.079162),new google.maps.LatLng(23.885942,45.079162));google.maps.event.addListener(n,"dragend",function(){if(!t.contains(n.getCenter())){var u=n.getCenter(),i=u.lng(),r=u.lat(),f=t.getNorthEast().lng(),e=t.getNorthEast().lat(),o=t.getSouthWest().lng(),s=t.getSouthWest().lat();i<o&&(i=o);i>f&&(i=f);r<s&&(r=s);r>e&&(r=e)}});google.maps.event.addListener(n,"zoom_changed",function(){n.getZoom()<i&&n.setZoom(i)})},wt=function(n){function u(n,t,i,r){var u=new MapLabel({text:n,position:new google.maps.LatLng(t,i),map:r,fontSize:0,align:"center",strokeWeight:0,strokeColor:"#000000"});return u.set("position",new google.maps.LatLng(t,i)),u}for(var r=[{lat:"23.885942",lang:"45.079162",label:"Saudi Arabia"},],t=[],i=0;i<r.length;i++)t[i]=u(r[i].label,r[i].lat,r[i].lang,n);google.maps.event.addListener(n,"zoom_changed",function(){var u=n.getZoom(),f={2:10,3:9,4:10,5:12,6:16,7:35,8:0,9:0},i,r;if(u>=4&&u<=7)for(i=0;i<t.length;i++)t[i].setMap(null),t[i].fontSize=f[u],t[i].setMap(n);else for(r=0;r<t.length;r++)t[r].setMap(null)})},o="storeLocator",yt;if(typeof n.fn[o]=="undefined"&&typeof google!="undefined"){var y,d,tt,g,p,ft,w,k,s,h,c,l,it,b,lt,at,et,v,ot=[],u=[],st=[],a=[],e={},rt={},ht={},f={},vt={ajaxData:null,altDistanceNoResult:!1,autoComplete:!1,autoCompleteDisableListener:!1,autoCompleteOptions:{},autoGeocode:!1,bounceMarker:!0,catMarkers:null,dataLocation:"../needreplace/media/Project/ToyotaTheme/Common/js/plugins/storeLocator/data/locations.json",dataRaw:null,dataType:"json",debug:!1,defaultLat:null,defaultLng:null,defaultLoc:!1,disableAlphaMarkers:!1,distanceAlert:60,dragSearch:!1,exclusiveFiltering:!1,exclusiveTax:null,featuredLocations:!1,fullMapStart:!0,fullMapStartBlank:!1,fullMapStartListLimit:!1,infoBubble:null,inlineDirections:!1,lengthUnit:"m",listColor1:"#ffffff",listColor2:"#eeeeee",loading:!1,locationsPerPage:10,mapSettings:{zoom:6,minZoom:3,center:new google.maps.LatLng(23.885942,45.079162),gestureHandling:n(t).width()<767?"greedy":"cooperative",mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,styles:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"administrative",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}]},markerCluster:null,markerImg:null,markerDim:null,maxDistance:!1,modal:!1,nameAttribute:"name",nameSearch:!1,noForm:!1,openNearest:!1,originMarker:!1,originMarkerDim:null,originMarkerImg:null,pagination:!1,querystringParams:!1,selectedMarkerImg:null,selectedMarkerImgDim:null,sessionStorage:!0,slideMap:!0,sortBy:null,storeLimit:-1,taxonomyFilters:null,visibleMarkersList:!1,xmlElement:"marker",addressID:"bh-sl-address",closeIcon:"bh-sl-close-icon",formContainer:"bh-sl-form-container",formID:"bh-sl-user-location",geocodeID:null,lengthSwapID:"bh-sl-length-swap",loadingContainer:"bh-sl-loading",locationList:"bh-sl-loc-list",mapID:"bh-sl-map",maxDistanceID:"bh-sl-maxdistance",modalContent:"bh-sl-modal-content",modalWindow:"bh-sl-modal-window",overlay:"bh-sl-overlay",regionID:"bh-sl-region",searchID:"bh-sl-search",sortID:"bh-sl-sort",taxonomyFiltersContainer:"bh-sl-filters-container",infowindowTemplatePath:"../needreplace/media/Project/ToyotaTheme/Common/js/plugins/storeLocator/templates/infowindow-description.html",listTemplatePath:"../needreplace/media/Project/ToyotaTheme/Common/js/plugins/storeLocator/templates/location-list-description.html",KMLinfowindowTemplatePath:"../needreplace/media/Project/ToyotaTheme/Common/js/plugins/storeLocator/templates/kml-infowindow-description.html",KMLlistTemplatePath:"../needreplace/media/Project/ToyotaTheme/Common/js/plugins/storeLocator/templates/kml-location-list-description.html",listTemplateID:null,infowindowTemplateID:null,callbackAutoGeoSuccess:null,callbackBeforeSend:null,callbackCloseDirections:null,callbackCreateMarker:null,callbackDirectionsRequest:null,callbackFilters:null,callbackFormVals:null,callbackGeocodeRestrictions:null,callbackJsonp:null,callbackListClick:null,callbackMapSet:function(n){ut(n);pt(n);wt(n)},callbackMarkerClick:null,callbackModalClose:null,callbackModalOpen:null,callbackModalReady:null,callbackNearestLoc:null,callbackNoResults:null,callbackNotify:null,callbackPageChange:null,callbackRegion:null,callbackSorting:null,callbackSuccess:null,addressErrorAlert:"Unable to find address",autoGeocodeErrorAlert:"Automatic location detection failed. Please fill in your address or zip code.",distanceErrorAlert:"Unfortunately, our closest location is more than ",kilometerLang:"kilometer",kilometersLang:"kilometers",mileLang:"mile",milesLang:"miles",noResultsTitle:"No results",noResultsDesc:"No locations were found with the given criteria. Please modify your selections or input.",nextPage:"Next &raquo;",prevPage:"&laquo; Prev"};n.extend(ct.prototype,{init:function(){var t=this,r,u;this.writeDebug("init");ht.EarthRadius=this.settings.lengthUnit==="km"?6367:3956;g=this.settings.dataType==="kml"?"xml":this.settings.dataType;this.settings.inlineDirections===!0&&n("."+this.settings.locationList).prepend('<div class="bh-sl-directions-panel"><\/div>');w=this.settings.mapSettings.zoom;Handlebars.registerHelper("niceURL",function(n){if(n)return n.replace("https://","").replace("http://","")});this.settings.taxonomyFilters!==null&&this.taxonomyFiltering();this.sorting();this.settings.modal===!0&&(this.settings.taxonomyFilters!==null&&n("."+this.settings.taxonomyFiltersContainer).clone(!0,!0).prependTo(y),y.wrap('<div class="'+this.settings.overlay+'"><div class="'+this.settings.modalWindow+'"><div class="'+this.settings.modalContent+'">'),n("."+this.settings.modalWindow).prepend('<div class="'+this.settings.closeIcon+'"><\/div>'),n("."+this.settings.overlay).hide());this.settings.autoComplete===!0&&(r=i.getElementById(this.settings.addressID),u=new google.maps.places.Autocomplete(r,this.settings.autoCompleteOptions),this.settings.autoComplete===!0&&this.settings.autoCompleteDisableListener!==!0&&u.addListener("place_changed",function(n){t.processForm(n)}));this._loadTemplates();this.findCenterAutoComplete(t)},destroy:function(){var t,r;if(this.writeDebug("destroy"),this.reset(),t=n("#"+this.settings.mapID),a.length)for(r=0;r<=a.length;r++)google.maps.event.removeListener(a[r]);n("."+this.settings.locationList+" ul").empty();t.hasClass("bh-sl-map-open")&&t.empty().removeClass("bh-sl-map-open");this.settings.modal===!0&&n(". "+this.settings.overlay).remove();t.attr("style","");y.hide();n.removeData(y.get(0));n(i).off(o);y.unbind()},findCenterAutoComplete:function(r){var u=this,f;n("#bh-sl-address").autocomplete({minLength:0,source:function(t,i){var s=r.settings.storeLocationData,f=[],e;if(t.term.length>0){n("#ui-id-1").show();for(var h,c="",l=0,a=t.term.toLowerCase().trim(),o=0;o<s.length;o++){for(l=0,s[o].city.toLowerCase().trim().indexOf(a)!==-1&&(c=s[o].city),h=0;h<f.length;h++)c==f[h]&&(l=1);c&&l!=1&&f.push(c)}return f.length||u.emptyResult(),f.length>0&&(f=f.sort()),i(f)}return e=[],s.filter(function(n){e.indexOf(n.city)==-1&&e.push(n.city)}),e.length>0&&(e=e.sort()),i(e)},response:function(){n(t).width()<=991},focus:function(t,i){return i.item.lat&&n("#bh-sl-address").val(i.item.value),!1},select:function(t,i){return n("#bh-sl-address").val(i.item.value).blur(),u.processForm(),!1}}).autocomplete("instance")._renderItem=function(t,i){var r=n("<li>").append("<div>"+i.value+"<\/div>").appendTo(t);return nt(),r};f=!1;n(i).on("click",".tt-page-findacenter .ui-autocomplete .ui-menu-item",function(){(n(t).width()<992||app.isTouch)&&(f=!0)}).on("click","#bh-sl-address-btn",function(n){return n.preventDefault(),!1});n("#bh-sl-address").focus(function(t){f?(f=!1,n(this).blur()):n(this).data("uiAutocomplete").search(n(this).val());var t=u.getMap();google.maps.event.trigger(t,"resize");ut(t)}).blur(function(){!n(this).val().trim().length&&n(".bh-sl-address-close-btn").is(":visible")&&n(".bh-sl-address-close-btn").trigger("click")});n(i).on("keydown","#bh-sl-address",function(t){var i=t.keyCode||t.which;i===27&&n(".bh-sl-address-close-btn").trigger("click")});n(".filter-mobile-header-controls").on("click",function(){u.processForm()});n(".bh-sl-address-close-btn").on("click",function(){u.processForm()})},reset:function(){if(this.writeDebug("reset"),n(".bh-sl-loc-list").removeClass("no-result-found"),u=[],ot=[],st=[],a=[],v=!1,n(i).off("click."+o,"."+this.settings.locationList+" li"),n("."+this.settings.locationList+" .bh-sl-close-directions-container").length&&n(".bh-sl-close-directions-container").remove(),this.settings.inlineDirections===!0){var t=n("."+this.settings.locationList+" .adp");t.length>0&&(t.remove(),n("."+this.settings.locationList+" ul").fadeIn());n(i).off("click","."+this.settings.locationList+" li .loc-directions a")}this.settings.pagination===!0&&n(i).off("click."+o,".bh-sl-pagination li")},formFiltersReset:function(){if(this.writeDebug("formFiltersReset"),this.settings.taxonomyFilters!==null){var t=n("."+this.settings.taxonomyFiltersContainer+" input"),i=n("."+this.settings.taxonomyFiltersContainer+" select");typeof t=="object"&&(t.each(function(){(n(this).is('input[type="checkbox"]')||n(this).is('input[type="radio"]'))&&n(this).prop("checked",!1)}),i.each(function(){n(this).prop("selectedIndex",0)}))}},mapReload:function(){this.writeDebug("mapReload");this.reset();this.settings.taxonomyFilters!==null&&(this.formFiltersReset(),this.taxonomyFiltersInit());c&&l?(this.settings.mapSettings.zoom=w,this.processForm()):this.mapping(f)},notify:function(n){this.writeDebug("notify",n);this.settings.callbackNotify&&this.settings.callbackNotify.call(this,n)},geoCodeCalcToRadian:function(n){return this.writeDebug("geoCodeCalcToRadian",n),n*(Math.PI/180)},geoCodeCalcDiffRadian:function(n,t){return this.writeDebug("geoCodeCalcDiffRadian",arguments),this.geoCodeCalcToRadian(t)-this.geoCodeCalcToRadian(n)},geoCodeCalcCalcDistance:function(n,t,i,r,u){return this.writeDebug("geoCodeCalcCalcDistance",arguments),u*2*Math.asin(Math.min(1,Math.sqrt(Math.pow(Math.sin(this.geoCodeCalcDiffRadian(n,i)/2),2)+Math.cos(this.geoCodeCalcToRadian(n))*Math.cos(this.geoCodeCalcToRadian(i))*Math.pow(Math.sin(this.geoCodeCalcDiffRadian(t,r)/2),2))))},getQueryString:function(n){if(this.writeDebug("getQueryString",n),n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.search);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}},getMap:function(){return this.map},_loadTemplates:function(){this.writeDebug("_loadTemplates");var t,i=this,r='<div class="bh-sl-error">Error: Could not load plugin templates. Check the paths and ensure they have been uploaded. Paths will be wrong if you do not run this from a web server.<\/div>';this.settings.dataType==="kml"&&this.settings.listTemplateID===null&&this.settings.infowindowTemplateID===null?n.when(n.get(this.settings.KMLinfowindowTemplatePath,function(n){t=n;tt=Handlebars.compile(t)}),n.get(this.settings.KMLlistTemplatePath,function(n){t=n;d=Handlebars.compile(t)})).then(function(){i.locator()},function(){n("."+i.settings.formContainer).append(r);throw new Error("Could not load storeLocator plugin templates");}):this.settings.listTemplateID!==null&&this.settings.infowindowTemplateID!==null?(tt=Handlebars.compile(n("#"+this.settings.infowindowTemplateID).html()),d=Handlebars.compile(n("#"+this.settings.listTemplateID).html()),i.locator()):n.when(n.get(this.settings.infowindowTemplatePath,function(n){t=n;tt=Handlebars.compile(t)}),n.get(this.settings.listTemplatePath,function(n){t=n;d=Handlebars.compile(t)})).then(function(){i.locator()},function(){n("."+i.settings.formContainer).append(r);throw new Error("Could not load storeLocator plugin templates");})},locator:function(){this.writeDebug("locator");this.settings.slideMap===!0&&y.hide();this._start();this._formEventHandler()},_formEventHandler:function(){this.writeDebug("_formEventHandler");var t=this;if(this.settings.noForm===!0){n(i).on("click."+o,"."+this.settings.formContainer+" button",function(n){t.processForm(n)});n(i).on("keydown."+o,function(i){i.keyCode===13&&n("#"+t.settings.addressID).is(":focus")&&t.processForm(i)})}else n(i).on("submit."+o,"#"+this.settings.formID,function(i){return t.processForm(i),n(".bh-sl-loc-list").show(),nt(),i.preventDefault(),!1});if(n(".bh-sl-reset").length&&n("#"+this.settings.mapID).length)n(i).on("click."+o,".bh-sl-reset",function(){t.mapReload()})},_getData:function(t,i,r,u){var e,c;this.writeDebug("_getData",arguments);var f=this,o="",s="",h="";if(typeof u!="undefined"&&typeof u.geometry.bounds!="undefined"&&(h=u.formatted_address,o=JSON.stringify(u.geometry.bounds.getNorthEast()),s=JSON.stringify(u.geometry.bounds.getSouthWest())),this.settings.callbackBeforeSend&&this.settings.callbackBeforeSend.call(this,t,i,r,h,o,s),f.settings.dataRaw!==null){if(g==="xml")return n.parseXML(f.settings.dataRaw);if(g==="json")return Array.isArray&&Array.isArray(f.settings.dataRaw)?f.settings.dataRaw:typeof f.settings.dataRaw=="string"?n.parseJSON(f.settings.dataRaw):[]}else return e=n.Deferred(),this.settings.loading===!0&&n("."+this.settings.formContainer).append('<div class="'+this.settings.loadingContainer+'"><\/div>'),c={origLat:t,origLng:i,origAddress:r,formattedAddress:h,boundsNorthEast:o,boundsSouthWest:s},this.settings.ajaxData!==null&&typeof this.settings.ajaxData=="object"&&n.extend(c,this.settings.ajaxData),n.ajax({type:"GET",url:this.settings.dataLocation+(this.settings.dataType==="jsonp"?(this.settings.dataLocation.match(/\?/)?"&":"?")+"callback=?":""),data:c,dataType:g,jsonpCallback:this.settings.dataType==="jsonp"?this.settings.callbackJsonp:null}).done(function(t){e.resolve(t);f.settings.storeLocationData!="undefined"&&(f.settings.storeLocationData=t);f.settings.loading===!0&&n("."+f.settings.formContainer+" ."+f.settings.loadingContainer).remove()}).fail(e.reject),e.promise()},_start:function(){var r,f,e,s,u;if(this.writeDebug("_start"),r=this,f=this.settings.autoGeocode,r.settings.fullMapStartBlank!==!1?(s=n("#"+r.settings.mapID),s.addClass("bh-sl-map-open"),u=r.settings.mapSettings,u.zoom=r.settings.fullMapStartBlank,e=new google.maps.LatLng(this.settings.defaultLat,this.settings.defaultLng),u.center=e,r.map=new google.maps.Map(i.getElementById(r.settings.mapID),u),google.maps.event.addDomListener(t,"resize",function(){var n=r.map.getCenter();google.maps.event.trigger(r.map,"resize");r.map.setCenter(n)}),r.settings.fullMapStartBlank=!1,u.zoom=w):(this.settings.defaultLoc===!0&&this.defaultLocation(),n.trim(n("#"+this.settings.addressID).val())!==""?(r.writeDebug("Using Address Field"),r.processForm(null),f=!1):this.settings.fullMapStart===!0&&(this.settings.querystringParams===!0&&this.getQueryString(this.settings.addressID)||this.settings.querystringParams===!0&&this.getQueryString(this.settings.searchID)||this.settings.querystringParams===!0&&this.getQueryString(this.settings.maxDistanceID)?(r.writeDebug("Using Query String"),this.processForm(null),f=!1):this.mapping(null))),this.settings.autoGeocode===!0&&f===!0&&(r.writeDebug("Auto Geo"),r.htmlGeocode()),this.settings.autoGeocode!==null){r.writeDebug("Button Geo");n(i).on("click."+o,"#"+this.settings.geocodeID,function(){r.htmlGeocode()});n(".bh-sl-location").click(function(){r.htmlGeocode()})}},htmlGeocode:function(){this.writeDebug("htmlGeocode",arguments);var n=this;if(n.settings.sessionStorage===!0&&t.sessionStorage&&t.sessionStorage.getItem("myGeo"))return n.writeDebug("Using Session Saved Values for GEO"),n.autoGeocodeQuery(JSON.parse(t.sessionStorage.getItem("myGeo"))),!1;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(i){n.writeDebug("Current Position Result");var r={coords:{latitude:i.coords.latitude,longitude:i.coords.longitude,accuracy:i.coords.accuracy}};n.settings.sessionStorage===!0&&t.sessionStorage&&t.sessionStorage.setItem("myGeo",JSON.stringify(r));n.settings.callbackAutoGeoSuccess&&n.settings.callbackAutoGeoSuccess.call(this,r);location.reload()},function(t){n._autoGeocodeError(t)})},googleGeocode:function(n){n.writeDebug("googleGeocode",arguments);var t=new google.maps.Geocoder;this.geocode=function(n,i){t.geocode(n,function(n,t){if(t===google.maps.GeocoderStatus.OK){var r={};r.latitude=n[0].geometry.location.lat();r.longitude=n[0].geometry.location.lng();r.geocodeResult=n[0];i(r)}else{i(null);throw new Error("Geocode was not successful for the following reason: "+t);}})}},reverseGoogleGeocode:function(n){n.writeDebug("reverseGoogleGeocode",arguments);var t=new google.maps.Geocoder;this.geocode=function(n,i){t.geocode(n,function(n,t){if(t===google.maps.GeocoderStatus.OK){if(n[0]){var r={};r.address=n[0].formatted_address;i(r)}}else{i(null);throw new Error("Reverse geocode was not successful for the following reason: "+t);}})}},roundNumber:function(n,t){return this.writeDebug("roundNumber",arguments),Math.round(n*Math.pow(10,t))/Math.pow(10,t)},isEmptyObject:function(n){this.writeDebug("isEmptyObject",arguments);for(var t in n)if(n.hasOwnProperty(t))return!1;return!0},hasEmptyObjectVals:function(n){var i,t;this.writeDebug("hasEmptyObjectVals",arguments);i=!0;for(t in n)n.hasOwnProperty(t)&&n[t]!==""&&n[t].length!==0&&(i=!1);return i},modalClose:function(){this.writeDebug("modalClose");this.settings.callbackModalClose&&this.settings.callbackModalClose.call(this);e={};n("."+this.settings.overlay+" select").prop("selectedIndex",0);n("."+this.settings.overlay+" input").prop("checked",!1);n("."+this.settings.overlay).hide()},_createLocationVariables:function(n){var i,t;this.writeDebug("_createLocationVariables",arguments);rt={};for(t in u[n])u[n].hasOwnProperty(t)&&(i=u[n][t],(t==="distance"||t==="altdistance")&&(i=this.roundNumber(i,2)),rt[t]=i)},sortAlpha:function(n){this.writeDebug("sortAlpha",arguments);var t=this.settings.sortBy.hasOwnProperty("prop")&&typeof this.settings.sortBy.prop!="undefined"?this.settings.sortBy.prop:"name";this.settings.sortBy.hasOwnProperty("order")&&this.settings.sortBy.order.toString()==="desc"?n.sort(function(n,i){return i[t].toLowerCase().localeCompare(n[t].toLowerCase())}):n.sort(function(n,i){return n[t].toLowerCase().localeCompare(i[t].toLowerCase())})},sortDate:function(n){this.writeDebug("sortDate",arguments);var t=this.settings.sortBy.hasOwnProperty("prop")&&typeof this.settings.sortBy.prop!="undefined"?this.settings.sortBy.prop:"date";this.settings.sortBy.hasOwnProperty("order")&&this.settings.sortBy.order.toString()==="desc"?n.sort(function(n,i){return new Date(i[t]).getTime()-new Date(n[t]).getTime()}):n.sort(function(n,i){return new Date(n[t]).getTime()-new Date(i[t]).getTime()})},sortNumerically:function(n){this.writeDebug("sortNumerically",arguments);var t=this.settings.sortBy!==null&&this.settings.sortBy.hasOwnProperty("prop")&&typeof this.settings.sortBy.prop!="undefined"?this.settings.sortBy.prop:"distance";this.settings.sortBy!==null&&this.settings.sortBy.hasOwnProperty("order")&&this.settings.sortBy.order.toString()==="desc"?n.sort(function(n,i){return i[t]<n[t]?-1:i[t]>n[t]?1:0}):n.sort(function(n,i){return n[t]<i[t]?-1:n[t]>i[t]?1:0})},sortCustomLogic:function(n,t){this.writeDebug("sortNumerically",arguments);for(var r=!1,e=[],u=[],o=[],s=[],f=[],i=0;i<n.length;i++)r==!1&&n[i].city.toLowerCase().indexOf(t.toLowerCase())!==-1&&(u.push(n[i]),r=!0),r==!1&&n[i].name.toLowerCase().indexOf(t.toLowerCase())!==-1&&(f.push(n[i]),r=!0),r=!1;return u.length>0||e.length>0||o.length>0||s.length>0||f.length>0?e.concat(u,o,s,f):n},sortCustom:function(n){this.writeDebug("sortCustom",arguments);this.settings.sortBy.hasOwnProperty("method")&&this.settings.sortBy.method.toString()==="alpha"?this.sortAlpha(n):this.settings.sortBy.hasOwnProperty("method")&&this.settings.sortBy.method.toString()==="date"?this.sortDate(n):this.sortNumerically(n)},filterData:function(n,t){var r;if(this.writeDebug("filterData",arguments),r=!0,t.category)if(typeof n.category!="undefined"&&new RegExp(t.category.join(""),"i").test(n.category.replace(/([^\x00-\x7F]|[.*+?^=!:${}()|\[\]\/\\]|&\s+)/g,""))){if(t.name!="undefined"){var u=n.name,f=n.postal,e=n.city,o=n.state,s=n.address,h=n.address2,i=t.name[0];r=u.toLowerCase().indexOf(i.toLowerCase())!==-1||f.toLowerCase().indexOf(i.toLowerCase())!==-1||e.toLowerCase().indexOf(i.toLowerCase())!==-1||o.toLowerCase().indexOf(i.toLowerCase())!==-1?!0:!1}}else r=!1;else if(t.name){var u=n.name,f=n.postal,e=n.city,o=n.state,s=n.address,h=n.address2,i=t.name[0];r=u.toLowerCase().indexOf(i.toLowerCase())!==-1||f.toLowerCase().indexOf(i.toLowerCase())!==-1||e.toLowerCase().indexOf(i.toLowerCase())!==-1||o.toLowerCase().indexOf(i.toLowerCase())!==-1?!0:!1}if(r)return!0},_paginationOutput:function(n,t){var i,u;this.writeDebug("_paginationOutput",arguments);n=parseFloat(n);var r="",f=n+1,e=n-1;for(n>0&&(r+='<li class="bh-sl-next-prev" data-page="'+e+'">'+this.settings.prevPage+"<\/li>"),i=0;i<Math.ceil(t);i++)u=i+1,r+=i===n?'<li class="bh-sl-current" data-page="'+i+'">'+u+"<\/li>":'<li data-page="'+i+'">'+u+"<\/li>";return f<t&&(r+='<li class="bh-sl-next-prev" data-page="'+f+'">'+this.settings.nextPage+"<\/li>"),r},paginationSetup:function(t){this.writeDebug("paginationSetup",arguments);var i="",r,f=n(".bh-sl-pagination-container .bh-sl-pagination");r=this.settings.storeLimit===-1||u.length<this.settings.storeLimit?u.length/this.settings.locationsPerPage:this.settings.storeLimit/this.settings.locationsPerPage;typeof t=="undefined"&&(t=0);f.length===0?i=this._paginationOutput(t,r):(f.empty(),i=this._paginationOutput(t,r));f.append(i)},markerImage:function(n,t,i){return this.writeDebug("markerImage",arguments),typeof t!="undefined"&&typeof i!="undefined"?{url:n,size:new google.maps.Size(t,i),scaledSize:new google.maps.Size(t,i)}:{url:n,size:new google.maps.Size(34,51),scaledSize:new google.maps.Size(34,51)}},createMarker:function(n,t,i,r,u,f,e){var h,c,l,o,s;if(this.writeDebug("createMarker",arguments),o=[],this.settings.catMarkers!==null&&typeof f!="undefined")if(f.indexOf(",")!==-1)for(o=f.split(","),s=0;s<o.length;s++)o[s]in this.settings.catMarkers&&(c=this.markerImage(this.settings.catMarkers[o[s]][0],parseInt(this.settings.catMarkers[o[s]][1]),parseInt(this.settings.catMarkers[o[s]][2])));else f in this.settings.catMarkers&&(c=this.markerImage(this.settings.catMarkers[f][0],parseInt(this.settings.catMarkers[f][1]),parseInt(this.settings.catMarkers[f][2])));return this.settings.markerImg!==null&&(c=this.settings.markerDim===null?this.markerImage(e):this.markerImage(this.settings.markerImg,this.settings.markerDim.width,this.settings.markerDim.height)),this.settings.callbackCreateMarker?h=this.settings.callbackCreateMarker.call(this,u,n,r,f):this.settings.disableAlphaMarkers===!0||this.settings.storeLimit===-1||this.settings.storeLimit>26||this.settings.catMarkers!==null||this.settings.markerImg!==null||this.settings.fullMapStart===!0&&v===!0&&(isNaN(this.settings.fullMapStartListLimit)||this.settings.fullMapStartListLimit>26||this.settings.fullMapStartListLimit===-1)?h=new google.maps.Marker({position:n,map:u,draggable:!1,icon:c}):(l={url:"https://mt.googleapis.com/vt/icon/name=icons/spotlight/spotlight-waypoint-b.png&text="+r+"&psize=16&font=fonts/Roboto-Regular.ttf&color=ff333333&ax=44&ay=48"},h=new google.maps.Marker({position:n,map:u,icon:l,draggable:!1})),h},_defineLocationData:function(t,i,r){var o,u,f,e;return this.writeDebug("_defineLocationData",arguments),o="",this._createLocationVariables(t.get("id")),rt.distance<=1?this.settings.lengthUnit==="km"?(f=this.settings.kilometerLang,u=this.settings.mileLang):(f=this.settings.mileLang,u=this.settings.kilometerLang):this.settings.lengthUnit==="km"?(f=this.settings.kilometersLang,u=this.settings.milesLang):(f=this.settings.milesLang,u=this.settings.kilometersLang),e=t.get("id"),o=this.settings.disableAlphaMarkers===!0||this.settings.storeLimit===-1||this.settings.storeLimit>26||this.settings.fullMapStart===!0&&v===!0&&(isNaN(this.settings.fullMapStartListLimit)||this.settings.fullMapStartListLimit>26||this.settings.fullMapStartListLimit===-1)?e+1:r>0?String.fromCharCode("A".charCodeAt(0)+(i+e)):String.fromCharCode("A".charCodeAt(0)+e),{location:[n.extend(rt,{markerid:e,marker:o,altlength:u,length:f,origin:p})]}},listSetup:function(t,i,r){this.writeDebug("listSetup",arguments);var u=this._defineLocationData(t,i,r),f=d(u);n("."+this.settings.locationList+" > ul").append(f)},changeSelectedMarker:function(n){var t;typeof et!="undefined"&&et.setIcon(at);t=this.settings.selectedMarkerImgDim===null?this.markerImage(this.settings.selectedMarkerImg):this.markerImage(this.settings.selectedMarkerImg,this.settings.selectedMarkerImgDim.width,this.settings.selectedMarkerImgDim.height);at=n.icon;n.setIcon(t);et=n},createInfowindow:function(i,r,f,e,o){var h,c;this.writeDebug("createInfowindow",arguments);var s=this,l=this._defineLocationData(i,e,o),a=tt(l);r==="left"?(h=i.get("id"),c=n("."+s.settings.locationList+" li[data-markerid="+h+"]"),UpdateHours(c)):google.maps.event.addListener(i,"click",function(){var e=i.get("id"),r=n("."+s.settings.locationList+" li[data-markerid="+e+"]"),o,f;t.innerWidth<=990&&n(".accordion-mobile-header-controls").addClass("show");UpdateHours(r);o=s.getMap();r.length>0&&(s.settings.callbackMarkerClick&&(s.settings.callbackMarkerClick.call(this,i,e,r,u[e]),s.map.panTo(new google.maps.LatLng(i.internalPosition.lat(),i.internalPosition.lng()))),n("."+s.settings.locationList+" li").removeClass("list-focus"),r.addClass("list-focus"),n(".bh-sl-container .bh-sl-loc-list").show(),UpdateHours(r),f=n("."+s.settings.locationList),f.animate({scrollTop:r.offset().top-f.offset().top+f.scrollTop()}),nt(),google.maps.event.trigger(o,"resize"),ut(o));s.settings.selectedMarkerImg!==null&&s.changeSelectedMarker(i)})},autoGeocodeQuery:function(t){var o,s;this.writeDebug("autoGeocodeQuery",arguments);var u=this,i=null,r=n("#"+this.settings.maxDistanceID),e;this.settings.querystringParams===!0?this.getQueryString(this.settings.maxDistanceID)?(i=this.getQueryString(this.settings.maxDistanceID),r.val()!==""&&(i=r.val())):this.settings.maxDistance===!0&&(i=r.val()||""):this.settings.maxDistance===!0&&(i=r.val()||"");o=new this.reverseGoogleGeocode(this);s=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);o.geocode({latLng:s},function(n){n!==null?(e=h=n.address,c=f.lat=t.coords.latitude,l=f.lng=t.coords.longitude,f.origin=e,f.distance=i,u.mapping(f)):u.notify(u.settings.addressErrorAlert)})},_autoGeocodeError:function(){this.writeDebug("_autoGeocodeError");this.notify(this.settings.autoGeocodeErrorAlert)},defaultLocation:function(){var e,o;this.writeDebug("defaultLocation");var t=this,i=null,r=n("#"+this.settings.maxDistanceID),u;this.settings.querystringParams===!0?this.getQueryString(this.settings.maxDistanceID)?(i=this.getQueryString(this.settings.maxDistanceID),r.val()!==""&&(i=r.val())):this.settings.maxDistance===!0&&(i=r.val()||""):this.settings.maxDistance===!0&&(i=r.val()||"");e=new this.reverseGoogleGeocode(this);o=new google.maps.LatLng(this.settings.defaultLat,this.settings.defaultLng);e.geocode({latLng:o},function(n){n!==null?(u=h=n.address,c=f.lat=t.settings.defaultLat,l=f.lng=t.settings.defaultLng,f.distance=i,f.origin=u,t.mapping(f)):t.notify(t.settings.addressErrorAlert)})},paginationChange:function(n){this.writeDebug("paginationChange",arguments);this.settings.callbackPageChange&&this.settings.callbackPageChange.call(this,n);f.page=n;this.mapping(f)},getAddressByMarker:function(n){this.writeDebug("getAddressByMarker",arguments);var t="";return u[n].address&&(t+=u[n].address+" "),u[n].address2&&(t+=u[n].address2+" "),u[n].city&&(t+=u[n].city+", "),u[n].state&&(t+=u[n].state+" "),u[n].postal&&(t+=u[n].postal+" "),u[n].country&&(t+=u[n].country+" "),t},clearMarkers:function(){var t,n;for(this.writeDebug("clearMarkers"),t=null,t=u.length<this.settings.storeLimit?u.length:this.settings.storeLimit,n=0;n<t;n++)a[n].setMap(null)},directionsRequest:function(t,r,f){var e,o;this.writeDebug("directionsRequest",arguments);this.settings.callbackDirectionsRequest&&this.settings.callbackDirectionsRequest.call(this,t,r,f,u[r]);e=this.getAddressByMarker(r);e&&(n("."+this.settings.locationList+" ul").hide(),this.clearMarkers(),b!==null&&typeof b!="undefined"&&(b.setMap(null),b=null),b=new google.maps.DirectionsRenderer,lt=new google.maps.DirectionsService,b.setMap(f),b.setPanel(n(".bh-sl-directions-panel").get(0)),o={origin:t,destination:e,travelMode:google.maps.TravelMode.DRIVING},lt.route(o,function(n,t){t===google.maps.DirectionsStatus.OK&&b.setDirections(n)}),n("."+this.settings.locationList).prepend('<div class="bh-sl-close-directions-container"><div class="'+this.settings.closeIcon+'"><\/div><\/div>'));n(i).off("click","."+this.settings.locationList+" li .loc-directions a")},closeDirections:function(){this.writeDebug("closeDirections");this.settings.callbackCloseDirections&&this.settings.callbackCloseDirections.call(this);this.reset();c&&l&&(this.settings.mapSettings.zoom=this.countFilters()===0?w:0,this.processForm(null));n(i).off("click."+o,"."+this.settings.locationList+" .bh-sl-close-icon")},lengthUnitSwap:function(t){this.writeDebug("lengthUnitSwap",arguments);t.val()==="alt-distance"?(n("."+this.settings.locationList+" .loc-alt-dist").show(),n("."+this.settings.locationList+" .loc-default-dist").hide()):t.val()==="default-distance"&&(n("."+this.settings.locationList+" .loc-default-dist").show(),n("."+this.settings.locationList+" .loc-alt-dist").hide())},processForm:function(t){this.writeDebug("processForm",arguments);var r=this,i=null,v={},u=n("#"+this.settings.addressID),e=n("#"+this.settings.searchID),o=n("#"+this.settings.maxDistanceID),a="";typeof t!="undefined"&&t!==null&&t.preventDefault();n("."+r.settings.formContainer+" input, ."+r.settings.formContainer+" select").blur();this.settings.querystringParams===!0?this.getQueryString(this.settings.addressID)||this.getQueryString(this.settings.searchID)||this.getQueryString(this.settings.maxDistanceID)?(h=this.getQueryString(this.settings.addressID),s=this.getQueryString(this.settings.searchID),i=this.getQueryString(this.settings.maxDistanceID),u.val()!==""&&(h=u.val()),e.val()!==""&&(s=e.val()),o.val()!==""&&(i=o.val())):(h=u.val()||"",s=e.val()||"",this.settings.maxDistance===!0&&(i=o.val()||"")):(h=u.val()||"",s=e.val()||"",this.settings.maxDistance===!0&&(i=o.val()||""));a=this.settings.callbackRegion?this.settings.callbackRegion.call(this,h,s,i):n("#"+this.settings.regionID).val();this.settings.callbackFormVals&&this.settings.callbackFormVals.call(this,h,s,i,a);typeof a!="undefined"&&(v={country:a});typeof this.settings.callbackGeocodeRestrictions=="function"&&(v=this.settings.callbackGeocodeRestrictions.call(this,h,s,i));h===""&&s===""&&this.settings.autoGeocode!==!0?this._start():h!==""?typeof p!="undefined"&&typeof c!="undefined"&&typeof l!="undefined"&&h===p?(f.lat=c,f.lng=l,f.origin=h,f.name=s,f.distance=i,r.mapping(f)):(f.lat=c,f.lng=l,f.origin=h,f.name=s,f.distance=i,r.mapping(f)):s!==""?(h===""&&delete f.origin,f.name=s,r.mapping(f)):this.settings.autoGeocode===!0&&(f.lat=c,f.lng=l,f.origin=h,f.name=s,f.distance=i,r.mapping(f))},locationsSetup:function(n,t,i,r,f){this.writeDebug("locationsSetup",arguments);typeof r!="undefined"&&(n.distance||(n.mylat=t,n.mylng=i,n.distance=this.geoCodeCalcCalcDistance(t,i,n.lat,n.lng,ht.EarthRadius),this.settings.lengthUnit==="m"?n.altdistance=parseFloat(n.distance)*1.609344:this.settings.lengthUnit==="km"&&(n.altdistance=parseFloat(n.distance)/1.609344)));this.settings.maxDistance===!0&&typeof f!="undefined"&&f!==null?n.distance<=f&&u.push(n):this.settings.maxDistance===!0&&this.settings.querystringParams===!0&&typeof f!="undefined"&&f!==null?n.distance<=f&&u.push(n):u.push(n)},sorting:function(){this.writeDebug("sorting",arguments);var t=this,r=n("#"+t.settings.mapID),i=n("#"+t.settings.sortID);if(i.length!==0)i.on("change."+o,function(i){i.stopPropagation();t.settings.pagination===!0&&t.paginationChange(0);var u,e;u=typeof n(this).find(":selected").attr("data-method")!="undefined"?n(this).find(":selected").attr("data-method"):"distance";e=n(this).val();t.settings.sortBy.method=u;t.settings.sortBy.prop=e;t.settings.callbackSorting&&t.settings.callbackSorting.call(this,t.settings.sortBy);r.hasClass("bh-sl-map-open")&&t.mapping(f)})},countFilters:function(){var n,t;if(this.writeDebug("countFilters"),n=0,!this.isEmptyObject(e))for(t in e)e.hasOwnProperty(t)&&(n+=e[t].length);return n},_existingCheckedFilters:function(t){this.writeDebug("_existingCheckedFilters",arguments);n("#"+this.settings.taxonomyFilters[t]+" input[type=checkbox]").each(function(){if(n(this).prop("checked")){var i=n(this).val();typeof i!="undefined"&&i!==""&&e[t].indexOf(i)===-1&&e[t].push(i)}})},_existingSelectedFilters:function(t){this.writeDebug("_existingSelectedFilters",arguments);n("#"+this.settings.taxonomyFilters[t]+" select").each(function(){var i=n(this).val();typeof i!="undefined"&&i!==""&&e[t].indexOf(i)===-1&&(e[t]=[i])})},_existingRadioFilters:function(t){this.writeDebug("_existingRadioFilters",arguments);n("#"+this.settings.taxonomyFilters[t]+" input[type=radio]").each(function(){if(n(this).prop("checked")){var i=n(this).val();typeof i!="undefined"&&i!==""&&e[t].indexOf(i)===-1&&(e[t]=[i])}})},checkFilters:function(){this.writeDebug("checkFilters");for(var n in this.settings.taxonomyFilters)this.settings.taxonomyFilters.hasOwnProperty(n)&&(this._existingCheckedFilters(n),this._existingSelectedFilters(n),this._existingRadioFilters(n))},selectQueryStringFilters:function(t,i){var r,u;if(this.writeDebug("selectQueryStringFilters",arguments),r=n("#"+this.settings.taxonomyFilters[t]),r.find('input[type="checkbox"]').length)for(u=0;u<i.length;u++)r.find('input:checkbox[value="'+i[u]+'"]').prop("checked",!0);r.find("select").length&&r.find('option[value="'+i[0]+'"]').prop("selected",!0);r.find('input[type="radio"]').length&&r.find('input:radio[value="'+i[0]+'"]').prop("checked",!0)},checkQueryStringFilters:function(){var t,n;this.writeDebug("checkQueryStringFilters",arguments);for(t in e)e.hasOwnProperty(t)&&(n=this.getQueryString(t),n.indexOf(",")!==-1&&(n=n.split(",")),typeof n!="undefined"&&n!==""&&e[t].indexOf(n)===-1&&(e[t]=Array.isArray(n)?n:[n]),e[t].length&&this.selectQueryStringFilters(t,e[t]))},getFilterKey:function(n){var t,i;this.writeDebug("getFilterKey",arguments);for(t in this.settings.taxonomyFilters)if(this.settings.taxonomyFilters.hasOwnProperty(t))for(i=0;i<this.settings.taxonomyFilters[t].length;i++)if(this.settings.taxonomyFilters[t]===n)return t},taxonomyFiltersInit:function(){this.writeDebug("taxonomyFiltersInit");for(var n in this.settings.taxonomyFilters)this.settings.taxonomyFilters.hasOwnProperty(n)&&(e[n]=[])},taxonomyFiltering:function(){this.writeDebug("taxonomyFiltering");var t=this;t.taxonomyFiltersInit();t.checkQueryStringFilters();n("."+this.settings.taxonomyFiltersContainer).on("change."+o,"input, select",function(i){var u,o,r,s,h;if(i.stopPropagation(),t.settings.pagination===!0&&t.paginationChange(0),n(this).is('input[type="checkbox"]')){if(n(".bh-sl-filters .form-check-input:checked").length>1)return savedCheckbox=n(this),s=n(".bh-sl-filters .form-check-input:checked"),s.prop("checked",!1),s.trigger("change"),setTimeout(function(){savedCheckbox.prop("checked",!0);savedCheckbox.trigger("change");savedCheckbox=null},20),i.preventDefault(),!1;t.checkFilters();nt();u=n(this).val();o=n(this).closest(".bh-sl-filters").attr("id");r=t.getFilterKey(o);r&&(n(this).prop("checked")?(e[r].indexOf(u)===-1&&e[r].push(u),n("#"+t.settings.mapID).hasClass("bh-sl-map-open")===!0&&(c&&l?(t.settings.mapSettings.zoom=0,t.processForm()):t.mapping(f))):(h=e[r].indexOf(u),h>-1&&(e[r].splice(h,1),n("#"+t.settings.mapID).hasClass("bh-sl-map-open")===!0&&(c&&l?(t.settings.mapSettings.zoom=t.countFilters()===0?w:0,t.processForm()):t.mapping(f)))))}else(n(this).is("select")||n(this).is('input[type="radio"]'))&&(t.checkFilters(),u=n(this).val(),o=n(this).closest(".bh-sl-filters").attr("id"),r=t.getFilterKey(o),u?r&&(e[r]=[u],n("#"+t.settings.mapID).hasClass("bh-sl-map-open")===!0&&(c&&l?(t.settings.mapSettings.zoom=0,t.processForm()):t.mapping(f))):(r&&(e[r]=[]),t.reset(),c&&l?(t.settings.mapSettings.zoom=w,t.processForm()):t.mapping(f)))})},checkVisibleMarkers:function(t,i){this.writeDebug("checkVisibleMarkers",arguments);var r=this,f,u;n("."+this.settings.locationList+" ul").empty();n(t).each(function(t,e){i.getBounds().contains(e.getPosition())&&(r.listSetup(e,0,0),u=d(f),n("."+r.settings.locationList+" > ul").append(u))});n("."+this.settings.locationList+" ul li:even").css("background",this.settings.listColor1);n("."+this.settings.locationList+" ul li:odd").css("background",this.settings.listColor2)},dragSearch:function(n){var i,r,t,u;this.writeDebug("dragSearch",arguments);i=n.getCenter();t=this;this.settings.mapSettings.zoom=n.getZoom();c=f.lat=i.lat();l=f.lng=i.lng();u=new this.reverseGoogleGeocode(this);r=new google.maps.LatLng(f.lat,f.lng);u.geocode({latLng:r},function(n){n!==null?(f.origin=h=n.address,t.mapping(f)):t.notify(t.settings.addressErrorAlert)})},emptyResult:function(){var e,r,u,f,t;this.writeDebug("emptyResult",arguments);r=n("."+this.settings.locationList+" ul");u=this.settings.mapSettings;this.map=new google.maps.Map(i.getElementById(this.settings.mapID),u);this.settings.callbackNoResults&&this.settings.callbackNoResults.call(this,this.map,u);r.empty();f=n('<span class="bh-no-result"><div class="bh-sl-noresults-title">'+this.settings.noResultsTitle+'<\/div><br><div class="bh-sl-noresults-desc">'+this.settings.noResultsDesc+"<\/span>").hide().fadeIn();r.append(f);e=c&&l?new google.maps.LatLng(c,l):new google.maps.LatLng(0,0);t={};app.isMobile?(t.lng="23.2887595",t.ltd="45.5384121"):(t.lng="24.0133276",t.ltd="40.6055508");this.map.setCenter(new google.maps.LatLng(t.lng,t.ltd));n(".bh-sl-loc-list").addClass("no-result-found");w&&this.map.setZoom(6)},originMarker:function(n,t,i){if(this.writeDebug("originMarker",arguments),this.settings.originMarker===!0){var u,r="";typeof t!="undefined"&&(r=this.settings.originMarkerImg!==null?this.settings.originMarkerDim===null?this.markerImage(this.settings.originMarkerImg):this.markerImage(this.settings.originMarkerImg,this.settings.originMarkerDim.width,this.settings.originMarkerDim.height):{url:"https://mt.googleapis.com/vt/icon/name=icons/spotlight/spotlight-waypoint-a.png"},u=new google.maps.Marker({position:i,map:n,icon:r,draggable:!1}))}},modalWindow:function(){if(this.writeDebug("modalWindow"),this.settings.modal===!0){var t=this;t.settings.callbackModalOpen&&t.settings.callbackModalOpen.call(this);n("."+t.settings.overlay).fadeIn();n(i).on("click."+o,"."+t.settings.closeIcon+", ."+t.settings.overlay,function(){t.modalClose()});n(i).on("click."+o,"."+t.settings.modalWindow,function(n){n.stopPropagation()});n(i).on("keyup."+o,function(n){n.keyCode===27&&t.modalClose()})}},openNearestLocation:function(i,r,u,f){var e,h,c,o,s;(this.writeDebug("openNearestLocation",arguments),this.settings.openNearest===!0&&typeof i!="undefined"&&(this.settings.fullMapStart!==!0||v!==!0)&&(this.settings.defaultLoc!==!0||v!==!0))&&(e=this,e.settings.callbackNearestLoc&&e.settings.callbackNearestLoc.call(this,e.map,i,r,u,f),h=0,c=a[h],e.createInfowindow(c,"left",r,u,f),o=n("."+e.settings.locationList),s=n("."+e.settings.locationList+" li[data-markerid="+h+"]"),n("."+e.settings.locationList+" li").removeClass("list-focus"),s.addClass("list-focus"),t.innerWidth<=990&&n(".accordion-mobile-header-controls").addClass("show"),UpdateHours(s),o.animate({scrollTop:s.offset().top-o.offset().top+o.scrollTop()}))},listClick:function(r,f,e,s){this.writeDebug("listClick",arguments);var h=this;n(i).on("click."+o,"."+h.settings.locationList+" li",function(){var c=n(this).data("markerid"),i=a[c],y,o,v;if(h.settings.callbackListClick&&h.settings.callbackListClick.call(this,c,i,u[c]),r.panTo(i.getPosition()),r.setZoom(14),y="left",h.settings.bounceMarker===!0?(i.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){i.setAnimation(null);h.createInfowindow(i,y,f,e,s)},700)):h.createInfowindow(i,y,f,e,s),h.settings.selectedMarkerImg!==null&&h.changeSelectedMarker(i),n("."+h.settings.locationList+" li").removeClass("list-focus"),n("."+h.settings.locationList+" li[data-markerid="+c+"]").addClass("list-focus"),t.innerWidth<=990&&n(".accordion-mobile-header-controls").addClass("show"),o=n("."+h.settings.locationList+" li[data-markerid="+c+"]"),o.length>0){var l=o.parent().children().index(o),w=localStorage.getItem("accordionStatus"),p=localStorage.getItem("accordionNo");t.innerWidth>=991&&(l==p&&w==="true"?(localStorage.setItem("accordionStatus","false"),o.removeClass("list-focus")):l!=p?(localStorage.setItem("accordionStatus","true"),localStorage.setItem("accordionNo",l),n("."+h.settings.locationList+" li").removeClass("list-focus"),o.addClass("list-focus")):(localStorage.setItem("accordionStatus","true"),localStorage.setItem("accordionNo",l)));v=n("."+h.settings.locationList);v.animate({scrollTop:o.offset().top-v.offset().top+v.scrollTop()})}});n(i).on("click."+o,"."+h.settings.locationList+" li a",function(n){n.stopPropagation()})},resultsTotalCount:function(t){this.writeDebug("resultsTotalCount",arguments);var i=n(".bh-sl-total-results");typeof t=="undefined"||t<=0||i.length===0||i.text(t)},inlineDirections:function(t,r){if(this.writeDebug("inlineDirections",arguments),this.settings.inlineDirections===!0&&typeof r!="undefined"){var u=this;n(i).on("click."+o,"."+u.settings.locationList+" li .loc-directions a",function(f){f.preventDefault();var e=n(this).closest("li").attr("data-markerid");u.directionsRequest(r,parseInt(e),t);n(i).on("click."+o,"."+u.settings.locationList+" .bh-sl-close-icon",function(){u.closeDirections()})})}},visibleMarkersList:function(n,t){if(this.writeDebug("visibleMarkersList",arguments),this.settings.visibleMarkersList===!0){var i=this;google.maps.event.addListenerOnce(n,"idle",function(){i.checkVisibleMarkers(t,n)});google.maps.event.addListener(n,"center_changed",function(){i.checkVisibleMarkers(t,n)});google.maps.event.addListener(n,"zoom_changed",function(){i.checkVisibleMarkers(t,n)})}},mapping:function(n){this.writeDebug("mapping",arguments);var t=this,f,o,s,i,u,r;this.isEmptyObject(n)||(f=n.lat,o=n.lng,s=n.geocodeResult,i=n.origin,r=n.page);t.settings.pagination===!0&&(typeof r=="undefined"||p!==h)&&(r=0);typeof i=="undefined"&&this.settings.nameSearch===!0?k=t._getData():(u=new google.maps.LatLng(f,o),typeof p!="undefined"&&i===p&&typeof ft!="undefined"?(i=p,k=ft):k=t._getData(c,l,i,s));t.settings.taxonomyFilters!==null&&t.hasEmptyObjectVals(e)&&t.checkFilters();t.settings.dataRaw!==null?t.processData(n,u,k,r):k.done(function(i){t.processData(n,u,i,r)})},processData:function(r,f,h,c){var ii,ri,ui,kt,fi,dt,b,ht,ci,ei,oi,d,si,hi,li,ai,gt,vi,pi;this.writeDebug("processData",arguments);var l=this,lt=0,at,vt,g,yi,tt,yt,ni,nt,rt,ut,pt,wt,ct,ti,et={},bt=n("#"+l.settings.lengthSwapID);if(this.isEmptyObject(r)||(at=r.lat,vt=r.lng,g=r.origin,yi=r.name,tt=r.distance),ii=n("#"+l.settings.mapID),ri=l.settings.lengthUnit==="km"?l.settings.kilometersLang:l.settings.milesLang,ft=k,typeof g!="undefined"&&(p=g),l.settings.callbackSuccess&&l.settings.callbackSuccess.call(this,r,f,h,c),wt=ii.hasClass("bh-sl-map-open"),l.settings.fullMapStart===!0&&wt===!1||l.settings.autoGeocode===!0&&wt===!1||l.settings.defaultLoc===!0&&wt===!1?v=!0:l.reset(),ii.addClass("bh-sl-map-open"),l.settings.dataType==="json"||l.settings.dataType==="jsonp")for(ui=0;lt<h.length;ui++){kt=h[ui];fi={};for(dt in kt)kt.hasOwnProperty(dt)&&(fi[dt]=kt[dt]);l.locationsSetup(fi,at,vt,g,tt);lt++}else l.settings.dataType==="kml"?n(h).find("Placemark").each(function(){var t={name:n(this).find("name").text(),lat:n(this).find("coordinates").text().split(",")[1],lng:n(this).find("coordinates").text().split(",")[0],description:n(this).find("description").text()};l.locationsSetup(t,at,vt,g,tt);lt++}):n(h).find(l.settings.xmlElement).each(function(){var t={};for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&(t[this.attributes[n].name]=this.attributes[n].value);l.locationsSetup(t,at,vt,g,tt);lt++});if(l.settings.nameSearch===!0&&typeof s!="undefined"&&(e[l.settings.nameAttribute]=[s],e.address=[s],e.postal=[s],e.address2=[s],e.city=[s],e.state=[s]),l.settings.taxonomyFilters!==null||l.settings.nameSearch===!0){for(b in e)if(e.hasOwnProperty(b)&&e[b].length>0)for(ht=0;ht<e[b].length;ht++)et[b]||(et[b]=[]),et[b][ht]=b=="name"||b=="address"||b=="address2"||b=="city"||b=="state"||b=="postal"?e[b][ht]:"(?=.*\\b"+e[b][ht].replace(/([^\x00-\x7F]|[.*+?^=!:${}()|\[\]\/\\]|&\s+)/g,"")+"\\b)";l.isEmptyObject(et)||(u=n.grep(u,function(n){return l.filterData(n,et)}))}if(t.locSet=u,l.settings.sortBy!==null&&typeof l.settings.sortBy=="object")l.sortCustom(u);else{if(typeof g!="undefined"&&l.settings.nameSearch===!0&&typeof s!="undefined"&&(u=l.sortCustomLogic(u,s)),l.isEmptyObject(et))if(l.settings.maxDistance===!0&&tt)(typeof u[0]=="undefined"||u[0].distance>tt)&&l.notify(l.settings.distanceErrorAlert+tt+" "+ri);else if(typeof u[0]!="undefined")l.settings.distanceAlert!==-1&&u[0].distance>l.settings.distanceAlert&&(l.notify(l.settings.distanceErrorAlert+l.settings.distanceAlert+" "+ri),pt=!0);else throw new Error("No locations found. Please check the dataLocation setting and path.");typeof u[0]!="undefined"&&(ti=u[0])}if(l.settings.featuredLocations===!0&&(ot=n.grep(u,function(n){return n.featured==="true"}),st=n.grep(u,function(n){return n.featured!=="true"}),u=[],u=ot.concat(st)),l.settings.slideMap===!0&&y.slideDown(),l.settings.pagination===!0&&l.paginationSetup(c),l.settings.altDistanceNoResult===!0&&ti.distance>l.settings.distanceAlert){l.emptyResult();return}if(l.isEmptyObject(u)||u[0].result==="none"){l.emptyResult();return}l.modalWindow();it=l.settings.storeLimit===-1||u.length<l.settings.storeLimit||this.settings.fullMapStart===!0&&v===!0&&(!isNaN(this.settings.fullMapStartListLimit)||this.settings.fullMapStartListLimit>26||this.settings.fullMapStartListLimit===-1)?u.length:l.settings.storeLimit;l.settings.pagination===!0?(rt=l.settings.locationsPerPage,nt=c*l.settings.locationsPerPage,nt+rt>u.length&&(rt=l.settings.locationsPerPage-(nt+rt-u.length)),u=u.slice(nt,nt+rt),it=u.length):(rt=it,nt=0);l.resultsTotalCount(u.length);l.settings.fullMapStart===!0&&v===!0&&l.settings.querystringParams!==!0||l.settings.mapSettings.zoom===0||typeof g=="undefined"||pt===!0?(ut=l.settings.mapSettings,ni=new google.maps.LatLngBounds):l.settings.pagination===!0?(ci=new google.maps.LatLng(u[0].lat,u[0].lng),c===0?(l.settings.mapSettings.center=f,ut=l.settings.mapSettings):(l.settings.mapSettings.center=ci,ut=l.settings.mapSettings)):(l.settings.mapSettings.center=f,ut=l.settings.mapSettings);typeof u[0]!="undefined"&&(ei=u[0],u.length==1&&(this.settings.mapSettings.zoom=12,this.settings.mapSettings.center=new google.maps.LatLng(ei.lat,ei.lng)));l.map=new google.maps.Map(i.getElementById(l.settings.mapID),ut);google.maps.event.addDomListener(t,"resize",function(){var n=l.map.getCenter();google.maps.event.trigger(l.map,"resize");l.map.setCenter(n)});l.settings.dragSearch===!0&&l.map.addListener("dragend",function(){l.dragSearch(l.map)});y.data(l.settings.mapID.replace("#",""),l.map);l.settings.callbackMapSet&&l.settings.callbackMapSet.call(this,l.map,f,w,ut);typeof InfoBubble!="undefined"&&l.settings.infoBubble!==null?(oi=l.settings.infoBubble,oi.map=l.map,ct=new InfoBubble(oi)):ct=new google.maps.InfoWindow;l.originMarker(l.map,g,f);n(i).on("click."+o,".bh-sl-pagination li",function(t){t.preventDefault();l.paginationChange(n(this).attr("data-page"))});for(l.inlineDirections(l.map,g),d=0;d<=rt-1;d++)si="",si=c>0?String.fromCharCode("A".charCodeAt(0)+(nt+d)):String.fromCharCode("A".charCodeAt(0)+d),hi=new google.maps.LatLng(u[d].lat,u[d].lng),li=u[d].markerImage,yt=l.createMarker(hi,u[d].name,u[d].address,si,l.map,u[d].category,li),yt.set("id",d),a[d]=yt,(l.settings.fullMapStart===!0&&v===!0&&l.settings.querystringParams!==!0||l.settings.mapSettings.zoom===0||typeof g=="undefined"||pt===!0)&&ni.extend(hi),l.createInfowindow(yt,null,ct,nt,c);if((l.settings.fullMapStart===!0&&v===!0&&l.settings.querystringParams!==!0||l.settings.mapSettings.zoom===0||typeof g=="undefined"||pt===!0)&&l.map.fitBounds(ni),ai=n("."+l.settings.locationList+" ul"),ai.empty(),v&&l.settings.fullMapStartListLimit!==!1&&!isNaN(l.settings.fullMapStartListLimit)&&l.settings.fullMapStartListLimit!==-1)for(gt=0;gt<l.settings.fullMapStartListLimit;gt++)vi=a[gt],l.listSetup(vi,nt,c);else n(a).each(function(n){var t=a[n];l.listSetup(t,nt,c)});if(bt.length){l.lengthUnitSwap(bt);bt.on("change."+o,function(n){n.stopPropagation();l.lengthUnitSwap(bt)})}l.openNearestLocation(ti,ct,nt,c);typeof MarkerClusterer!="undefined"&&l.settings.markerCluster!==null&&(pi=new MarkerClusterer(l.map,a,l.settings.markerCluster));l.listClick(l.map,ct,nt,c);n("."+l.settings.locationList+" ul > li:even").css("background",l.settings.listColor1);n("."+l.settings.locationList+" ul > li:odd").css("background",l.settings.listColor2);l.visibleMarkersList(l.map,a);l.settings.modal===!0&&l.settings.callbackModalReady&&l.settings.callbackModalReady.call(this);l.settings.callbackFilters&&l.settings.callbackFilters.call(this,e)},writeDebug:function(){t.console&&this.settings.debug&&(this.writeDebug=Function.prototype.bind?Function.prototype.bind.call(console.log,console,"StoreLocator :"):function(){arguments[0]="StoreLocator : "+arguments[0];Function.prototype.apply.call(console.log,console,arguments)},this.writeDebug.apply(this,arguments))}});n(".accordion-mobile-header-controls").on("click",function(){n(this).removeClass("show");n(".accordion-inner").removeClass("list-focus")});n.fn[o]=function(t){var u=arguments,i;return t===r||typeof t=="object"?this.each(function(){n.data(this,"plugin_"+o)||n.data(this,"plugin_"+o,new ct(this,t))}):typeof t=="string"&&t[0]!=="_"&&t!=="init"?(this.each(function(){var r=n.data(this,"plugin_"+o);r instanceof ct&&typeof r[t]=="function"&&(i=r[t].apply(r,Array.prototype.slice.call(u,1)));t==="destroy"&&n.data(this,"plugin_"+o,null)}),i!==r?i:this):void 0};navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&(yt=setInterval(function(){n(".ui-autocomplete").length&&(clearInterval(yt),n(".ui-autocomplete").off("menufocus hover mouseover mouseenter"))},1e3))}}(jQuery,window,document);